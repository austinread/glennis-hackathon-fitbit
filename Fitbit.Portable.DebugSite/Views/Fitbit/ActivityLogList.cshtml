@model SampleWebMVCOAuth2.ViewModels.ActivityLogListViewModel

@{
    ViewBag.Title = "Activity";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Activities</h2>


<div class="spaced-div">
    @for (var i = 0; i < Model.LogList.Activities.Count; i++)
    {
        var log = Model.LogList.Activities[i];
        var activityLevelNotZero = log.ActivityLevel.Where(a => a.Minutes > 0).FirstOrDefault();
        float stepRatio = (float)log.Steps / Model.StepGoal;
        string stepClass = stepRatio > 1 ? "steps-success" : stepRatio > .5 ? "steps-warning" : "steps-danger";
        string arrow = "";
        if (i < Model.LogList.Activities.Count - 1 && Model.LogList.Activities.Count > 1)
        {
            var nextLog = Model.LogList.Activities[i + 1];
            arrow = log.Steps < nextLog.Steps ? "↓" : log.Steps > nextLog.Steps ? "↑" : "";
        }

        <em>@log.DateOfActivity</em>
        <div>Minutes: @activityLevelNotZero.Minutes.ToString()</div>
        <div>Steps: <span class="@stepClass">@log.Steps</span> @arrow</div>
        <br />
    }
</div>

<style>
    .steps-success {
        color: green;
    }
    .steps-warning {
        color: orange;
    }
    .steps-danger {
        color: red;
    }
</style>